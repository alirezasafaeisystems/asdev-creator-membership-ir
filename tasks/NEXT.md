# Next Tasks (Phased, No Timeline)

> Updated: 2026-02-21
> Rule: this plan is phase-based and has no calendar deadline.

## Auto Baseline
- [x] Baseline verification from `docs/PROJECT_STATUS.md`
- [x] Keep this file generated by automation (`pnpm -w roadmap:sync-next`)

## Phase Execution Board
### Phase 0 - Foundation Reliability
- [x] Phase status
- [x] Validate baseline gates: docs, lint, typecheck, local-first, test, build
- [x] Keep DoD/Test Strategy and docs index aligned
- [x] Avoid external runtime dependencies (local-first enforcement)

### Phase 1 - Membership Core Hardening
- [x] Phase status
- [x] Implement `POST /api/v1/subscriptions/cancel` + audit event
- [x] Implement `GET /api/v1/payments/:id` for owner
- [x] Add `GET /api/v1/health/db` and callback hardening tests

### Phase 2 - Payment Provider Real Adapter
- [x] Phase status
- [x] Implement real payment adapter + provider error mapping
- [x] Validate webhook/callback signature
- [x] Implement reliable reconciliation report path

### Phase 3 - Security and RBAC
- [x] Phase status
- [x] Replace `x-admin-key` with session-based RBAC
- [x] Enforce roles (`platform_admin`, `support_admin`, `auditor`)
- [x] Harden rate limits for auth and callback routes

### Phase 4 - Content Protection and Delivery
- [x] Phase status
- [x] Implement protected content storage strategy
- [x] Implement `GET /api/v1/download/:token` with short-lived tokens
- [x] Enforce membership check in content delivery flow

### Phase 5 - Discovery and Public Experience
- [x] Phase status
- [x] Build public creator pages (SSR/SSG)
- [x] Add creators/plans search and filter
- [x] Apply SEO baseline: metadata + sitemap

### Phase 6 - Operations and Release Readiness
- [x] Phase status
- [x] Run `apps/api` and `apps/web` with local runtime scripts (no Docker)
- [x] Complete operational health checks and runbook alignment
- [x] Finalize release verification and stop/start rollback checklist

### Phase 7 - Optimization Loop (Continuous)
- [x] Phase status
- [x] Enforce performance budget checks
- [x] Add regression-focused hardening for critical flows
- [x] Control docs/API drift with recurring validation

## Required Gates Before Closing Any Phase
- [x] `pnpm -w docs:validate`
- [x] `pnpm -w lint`
- [x] `pnpm -w typecheck`
- [x] `pnpm -w local-first:scan`
- [x] `pnpm -w test`
- [x] `pnpm -w build`

## Automation Commands
- `pnpm -w roadmap:sync-next`
- `pnpm -w evidence:record`
- `pnpm -w evidence:record:gates`
- `pnpm -w evidence:record:smoke`
- `pnpm -w test:integration`
- `pnpm -w test:e2e`
- `pnpm -w smoke:mock-payment` (requires `DATABASE_URL`)

